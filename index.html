<!DOCTYPE html>
<html>
<head>
    <title>Mega Man RPG: Prototype (Remake)</title>
    <meta name="robots" content="noindex,nofollow" />
    <meta name="darkreader-lock" content="already-dark-mode" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta name="viewport" content="width=780, initial-scale=1, user-scalable=yes" />
    <!-- <meta name="viewport" content="width=780, initial-scale=1, maximum-scale=1, user-scalable=no" /> -->
    <link rel="stylesheet" href="index.css" />
    <link rel="stylesheet" href="src/assets/fonts/fonts.css" />
    <!-- <script src="//cdn.jsdelivr.net/npm/phaser@3.80.1/dist/phaser.js"></script> -->
    <script src="src/libs/phaser-3.80.1.js"></script>
    <link rel="icon" href="src/assets/favicon.ico" />
</head>
<body>

    <h1>Mega Man RPG: Prototype (Remake)</h1>

    <div class="font-loader open-sans">
        <span class="regular">.</span>
        <span class="bold">.</span>
        <span class="italic">.</span>
        <span class="bold-italic">.</span>
    </div>

    <div id="game-container" class="paused">
        <script type="module" src="src/main.js"></script>
    </div>
    <script>
        // make it so clicking the game container triggers an alert
        let gameIsReady = false;
        let gameIsRunning = false;
        let gameIsClickable = false;
        let gameResumeCallback = null;
        window.toggleGameIsReady = () => { gameIsReady = !gameIsReady; window.refreshGameContainer(); };
        window.toggleGameIsRunning = () => { gameIsRunning = !gameIsRunning; window.refreshGameContainer();  };
        window.toggleGameIsClickable = () => { gameIsClickable = !gameIsClickable; };
        window.setGameResumeCallback = (callback) => { gameResumeCallback = callback; };
        window.refreshGameContainer = () => {
            const gameContainer = document.getElementById('game-container');
            if (gameIsReady){ gameContainer.classList.add('ready'); }
            else { gameContainer.classList.remove('ready'); }
            if (gameIsRunning){ gameContainer.classList.add('running'); gameContainer.classList.remove('paused'); }
            else { gameContainer.classList.add('paused'); gameContainer.classList.remove('running'); }
            };
        window.refreshGameContainer();
        document.getElementById('game-container').addEventListener('click', () => {
            if (!gameIsClickable){ return false; }
            //console.log('The game container was clicked! w/ gameIsReady:', gameIsReady, 'gameIsRunning:', gameIsRunning);
            if (!gameIsReady){ return false; }
            if (gameIsRunning){ return false; }
            window.toggleGameIsRunning(true);
            if (gameResumeCallback
                && typeof gameResumeCallback === 'function'){
                gameResumeCallback();
                }
            return true;
        });
    </script>

</body>
</html>