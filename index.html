<!DOCTYPE html>
<html>
<head>
    <title>Mega Man RPG: Prototype (Remake)</title>
    <meta name="robots" content="noindex,nofollow" />
    <meta name="darkreader-lock" content="already-dark-mode" />
    <meta name="viewport" content="width=780, initial-scale=1, user-scalable=yes" />
    <!-- <meta name="viewport" content="width=780, initial-scale=1, maximum-scale=1, user-scalable=no" /> -->
    <link rel="stylesheet" href="index.css" />
    <link rel="stylesheet" href="src/assets/fonts/fonts.css" />
    <!-- <script src="//cdn.jsdelivr.net/npm/phaser@3.80.1/dist/phaser.js"></script> -->
    <script src="src/libs/phaser-3.80.1.js"></script>
    <link rel="icon" href="src/assets/favicon.ico" />
</head>
<body>

    <h1>Mega Man RPG: Prototype (Remake)</h1>

    <div class="font-loader open-sans">
        <span class="regular">.</span>
        <span class="bold">.</span>
        <span class="italic">.</span>
        <span class="bold-italic">.</span>
    </div>

    <div id="game-container" class="paused">
        <script type="module" src="src/main.js"></script>
    </div>
    <script>
        // make it so clicking the game container triggers an alert
        let gameIsReady = false;
        let gameIsRunning = false;
        let gameIsClickable = false;
        let currentGameScene = null;
        window.toggleGameIsReady = () => { gameIsReady = !gameIsReady; window.refreshGameContainer(); };
        window.toggleGameIsRunning = () => { gameIsRunning = !gameIsRunning; window.refreshGameContainer();  };
        window.toggleGameIsClickable = () => { gameIsClickable = !gameIsClickable; };
        window.setCurrentGameScene = (scene) => { currentGameScene = scene; window.refreshGameContainer(); };
        window.refreshGameContainer = () => {
            const gameContainer = document.getElementById('game-container');
            if (gameIsReady){ gameContainer.classList.add('ready'); }
            else { gameContainer.classList.remove('ready'); }
            if (gameIsRunning){ gameContainer.classList.add('running'); gameContainer.classList.remove('paused'); }
            else { gameContainer.classList.add('paused'); gameContainer.classList.remove('running'); }
            };
        window.refreshGameContainer();
        document.getElementById('game-container').addEventListener('click', () => {
            if (!gameIsClickable){ return false; }
            //console.log('The game container was clicked!');
            if (!gameIsReady){
                //console.log('The game is not ready yet!');
                return false;
                }
            if (gameIsRunning){
                //console.log('The game is already running!');
                return false;
                }
            //console.log('The game is paused! (Let\'s resume it!)');
            if (currentGameScene && currentGameScene.scene){
                currentGameScene.scene.resume();
                window.toggleGameIsRunning(true);
                }
            return true;
        });
    </script>

</body>
</html>